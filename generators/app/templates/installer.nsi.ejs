# Generated with generator-nsis
# https://github.com/idleberg/generator-nsis

# Includes ---------------------------------<% pkg.includes.forEach( include => { %>
!include "<%= include %>.nsh"<% }) %>

# Settings ---------------------------------
Name "<%- pkg.name %>"<% if (typeof pkg.ampersand_name !== 'undefined') { %> "<%- pkg.ampersand_name %>"<% } %>
OutFile "<%= pkg.outfile %>.exe"
Unicode <%= pkg.unicode %>
RequestExecutionLevel <%= pkg.elevation %>
InstallDir "$PROGRAMFILES\<%- pkg.name %>"

# Pages ------------------------------------
<% pkg.pages.forEach( page => { %><% if (pkg.includes.includes('MUI2')) { %>!insertmacro MUI_PAGE_<%= page.toUpperCase() %><% } else { %>Page <%= page %><% } %><% }) %>

# Languages --------------------------------
<% if (pkg.includes.includes('MUI2')) { %>!insertmacro MUI_LANGUAGE "English"<% } else { %>LoadLanguageFile "English.nlf"<% } %><% pkg.languages.forEach( language => { %>
<% if (pkg.includes.includes('MUI2')) { %>!insertmacro MUI_LANGUAGE "<%= language %>"<% } else { %>LoadLanguageFile "<%= language %>.nlf"<% } %><% }) %>

# Sections ---------------------------------<% for (let step = 0; step < parseInt(pkg.sections); step++) { %>
Section "section" SECTION_<%= step %>
SectionEnd
<% } %><% if (pkg.includes.includes('MUI2')) { %>
# Descriptions -----------------------------<% for (let step = 0; step < parseInt(pkg.sections); step++) { %>
LangString DESC_SECTION_<%= step %> ${LANG_ENGLISH} "Description for section <%= step %>"<% } %>

!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN<% for (let step = 0; step < parseInt(pkg.sections); step++) { %>
    !insertmacro MUI_DESCRIPTION_TEXT ${SECTION_<%= step %>} $(DESC_SECTION_<%= step %>)<% } %>
!insertmacro MUI_FUNCTION_DESCRIPTION_END
<% } %>
# Functions --------------------------------
<% pkg.callbacks.forEach( callback => { %>
Function .<%= callback %>
FunctionEnd
<% }) %>